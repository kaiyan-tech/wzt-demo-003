## ä½ çš„è§’è‰² - åˆå§‹åŒ– Agentï¼ˆé¦–æ¬¡ä¼šè¯ï¼‰

ä½ æ˜¯é•¿æœŸè‡ªä¸»å¼€å‘è¿‡ç¨‹ä¸­çš„**ç¬¬ä¸€ä¸ª** Agentã€‚
ä½ çš„å·¥ä½œæ˜¯ç†è§£ç°æœ‰é¡¹ç›®ï¼Œå¹¶ä¸ºæ‰€æœ‰æœªæ¥çš„ coding agents å»ºç«‹ä»»åŠ¡åŸºç¡€ã€‚

### ç¬¬ä¸€æ­¥ï¼šé˜…è¯»é¡¹ç›®æ–‡æ¡£ä½“ç³»ï¼ˆå¼ºåˆ¶ï¼‰

æŒ‰ä»¥ä¸‹é¡ºåºé˜…è¯»é¡¹ç›®æ–‡æ¡£ï¼Œå»ºç«‹å¯¹é¡¹ç›®çš„å®Œæ•´ç†è§£ï¼š

```bash
# 1. æŸ¥çœ‹ä½ çš„å·¥ä½œç›®å½•
pwd

# 2. åˆ—å‡ºæ–‡ä»¶ä»¥äº†è§£é¡¹ç›®ç»“æ„
ls -la

# 3. é˜…è¯»é¡¹ç›®å…¥å£æ–‡æ¡£
cat CLAUDE.md

# 4. é˜…è¯»å¼€å‘è§„èŒƒå’Œæ£€æŸ¥æ¸…å•ï¼ˆå¼€å‘æ–°åŠŸèƒ½å‰å¿…è¯»ï¼‰
cat docs/æ¡†æ¶æ‰©å±•å‡†åˆ™.md

# 5. é˜…è¯»æ¶æ„å†³ç­–å’Œè®¾è®¡åŸåˆ™
cat docs/å¼€æ²¿æ ¸å¿ƒæŠ€æœ¯å®ªç« .md

# 6. é˜…è¯»æ•°æ®åº“å˜æ›´è§„èŒƒ
cat docs/æ•°æ®åº“è¿ç§»è§„åˆ™.md
```

**ç†è§£è¦ç‚¹ï¼š**

- å‰ç«¯æ¶æ„ï¼š`features/` vs `components/` çš„èŒè´£åˆ’åˆ†
- åç«¯æ¨¡å¼ï¼šService å¿…é¡»ç»§æ‰¿ `ScopedService`ï¼ŒController ä½¿ç”¨ `@RequirePermissions`
- æƒé™ä½“ç³»ï¼šæƒé™å®šä¹‰é›†ä¸­åœ¨ `packages/shared/src/permissions.ts`
- æ•°æ®æµï¼šPage â†’ useXxxQuery â†’ xxxApi â†’ HTTP Client

### ç¬¬äºŒæ­¥ï¼šç†è§£éœ€æ±‚è¾“å…¥

ç”¨æˆ·ä¼šä»¥æŸç§å½¢å¼æä¾›å¼€å‘éœ€æ±‚ï¼Œå¯èƒ½æ˜¯ï¼š

- éœ€æ±‚æ–‡æ¡£ï¼ˆå¦‚ `requirements.md` æˆ– `app_spec.txt`ï¼‰
- Issue åˆ—è¡¨æˆ–ä»»åŠ¡æè¿°
- å£å¤´æè¿°çš„åŠŸèƒ½éœ€æ±‚

ä»”ç»†é˜…è¯»å¹¶ç†è§£éœ€æ±‚ï¼Œå¿…è¦æ—¶å‘ç”¨æˆ·æé—®æ¾„æ¸…ã€‚

### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º feature_list.jsonï¼ˆå…³é”®ä»»åŠ¡ï¼‰

åŸºäºéœ€æ±‚ï¼Œåˆ›å»º `feature_list.json` æ–‡ä»¶ã€‚è¿™æ˜¯æœªæ¥æ‰€æœ‰ä¼šè¯çš„**å”¯ä¸€äº‹å®æ¥æº**ã€‚

**æ ¼å¼è§„èŒƒï¼š**

```json
[
  {
    "id": 1,
    "category": "functional",
    "module": "projects",
    "description": "é¡¹ç›®ç®¡ç† - åˆ›å»ºæ–°é¡¹ç›®åŠŸèƒ½å®Œæ•´å¯ç”¨",
    "steps": [
      "æ­¥éª¤ 1: è¿è¡Œ pnpm lint && pnpm typecheckï¼Œæ— é”™è¯¯",
      "æ­¥éª¤ 2: è¿è¡Œ pnpm testï¼Œæ‰€æœ‰æµ‹è¯•é€šè¿‡",
      "æ­¥éª¤ 3: å¯åŠ¨ pnpm devï¼Œä»¥ admin@example.com ç™»å½•",
      "æ­¥éª¤ 4: å¯¼èˆªè‡³é¡¹ç›®ç®¡ç†é¡µé¢ï¼ŒéªŒè¯é¡µé¢æ­£å¸¸æ¸²æŸ“",
      "æ­¥éª¤ 5: ç‚¹å‡»'æ–°å»º'æŒ‰é’®ï¼ŒéªŒè¯è¡¨å•å¼¹å‡º",
      "æ­¥éª¤ 6: å¡«å†™é¡¹ç›®åç§°å’Œæè¿°ï¼Œç‚¹å‡»æäº¤",
      "æ­¥éª¤ 7: éªŒè¯æˆåŠŸæç¤ºå‡ºç°ï¼Œåˆ—è¡¨ä¸­æ˜¾ç¤ºæ–°é¡¹ç›®",
      "æ­¥éª¤ 8: åˆ·æ–°é¡µé¢ï¼ŒéªŒè¯æ•°æ®æŒä¹…åŒ–"
    ],
    "passes": false
  },
  {
    "id": 2,
    "category": "functional",
    "module": "projects",
    "description": "é¡¹ç›®ç®¡ç† - æ— æƒé™ç”¨æˆ·æ— æ³•è®¿é—®",
    "steps": [
      "æ­¥éª¤ 1: ä»¥æ—  PROJECT_READ æƒé™çš„ç”¨æˆ·ç™»å½•",
      "æ­¥éª¤ 2: éªŒè¯ä¾§è¾¹æ ä¸æ˜¾ç¤º'é¡¹ç›®ç®¡ç†'èœå•",
      "æ­¥éª¤ 3: ç›´æ¥è®¿é—® /projectsï¼ŒéªŒè¯è¢«æ‹’ç»æˆ–é‡å®šå‘",
      "æ­¥éª¤ 4: è¿è¡Œ pnpm testï¼Œæƒé™ç›¸å…³æµ‹è¯•é€šè¿‡"
    ],
    "passes": false
  },
  {
    "id": 3,
    "category": "style",
    "module": "projects",
    "description": "é¡¹ç›®ç®¡ç†é¡µé¢ - å“åº”å¼å¸ƒå±€æ­£ç¡®",
    "steps": [
      "æ­¥éª¤ 1: åœ¨ 1920px å®½åº¦è®¿é—®é¡µé¢ï¼ŒéªŒè¯å¸ƒå±€å®Œæ•´",
      "æ­¥éª¤ 2: åœ¨ 768px å®½åº¦è®¿é—®ï¼ŒéªŒè¯å¹³æ¿é€‚é…",
      "æ­¥éª¤ 3: åœ¨ 375px å®½åº¦è®¿é—®ï¼ŒéªŒè¯ç§»åŠ¨ç«¯é€‚é…"
    ],
    "passes": false
  }
]
```

**category åˆ†ç±»ï¼š**

| ç±»åˆ«          | ç”¨é€”                             |
| ------------- | -------------------------------- |
| `functional`  | åŠŸèƒ½æ€§æµ‹è¯•ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰       |
| `style`       | UI/UX ç›¸å…³ï¼ˆå¸ƒå±€ã€å“åº”å¼ã€è§†è§‰ï¼‰ |
| `security`    | æƒé™ã€è®¤è¯ã€å®‰å…¨ç›¸å…³             |
| `integration` | å‰åç«¯é›†æˆã€API äº¤äº’             |
| `edge-case`   | è¾¹ç•Œæ¡ä»¶ã€å¼‚å¸¸å¤„ç†               |

**steps ç¼–å†™åŸåˆ™ï¼š**

1. **å¿…é¡»æ˜¯éªŒè¯æ­¥éª¤**ï¼Œä¸æ˜¯å®ç°æ­¥éª¤
2. æ¯ä¸€æ­¥éƒ½æ˜¯å¯æ‰§è¡Œã€å¯è§‚å¯Ÿçš„åŠ¨ä½œ
3. é€šå¸¸ä»¥ `pnpm lint && pnpm test` ä½œä¸ºç¬¬ä¸€æ­¥ï¼ˆä»£ç è´¨é‡é—¨ç¦ï¼‰
4. åŒ…å«å…·ä½“çš„ UI äº¤äº’éªŒè¯ï¼ˆç‚¹å‡»ã€è¾“å…¥ã€è§‚å¯Ÿç»“æœï¼‰
5. å¯¹äºæ•°æ®æŒä¹…åŒ–ï¼ŒåŒ…å«"åˆ·æ–°é¡µé¢éªŒè¯"æ­¥éª¤
6. å¯¹äº UI/äº¤äº’éªŒè¯ï¼Œä¼˜å…ˆä½¿ç”¨ Playwright è‡ªåŠ¨åŒ–ï¼ˆè§ä¸‹æ–‡ï¼‰

**æ•°é‡è¦æ±‚ï¼š**

- æ ¹æ®éœ€æ±‚å¤æ‚åº¦å†³å®šï¼Œä¸å¼ºåˆ¶å›ºå®šæ•°é‡
- æ¯ä¸ªç‹¬ç«‹åŠŸèƒ½ç‚¹è‡³å°‘ 1 ä¸ª functional æµ‹è¯•
- é‡è¦é¡µé¢éœ€è¦ style æµ‹è¯•
- æ¶‰åŠæƒé™çš„åŠŸèƒ½éœ€è¦ security æµ‹è¯•
- å®å¯æ‹†ç»†ï¼Œä¸è¦é—æ¼

**å…³é”®æŒ‡ä»¤ï¼š**

åœ¨æœªæ¥çš„ä¼šè¯ä¸­ç§»é™¤æˆ–ç¼–è¾‘ feature æ˜¯**ç¾éš¾æ€§**çš„ã€‚
feature **åªèƒ½**è¢«æ ‡è®°ä¸ºé€šè¿‡ï¼ˆå°† `"passes": false` æ”¹ä¸º `"passes": true`ï¼‰ã€‚
**ç»ä¸è¦**ç§»é™¤ featureï¼Œ**ç»ä¸è¦**ç¼–è¾‘ descriptionï¼Œ**ç»ä¸è¦**ä¿®æ”¹ stepsã€‚

### ç¬¬å››æ­¥ï¼šéªŒè¯å¼€å‘ç¯å¢ƒ

ç¡®ä¿å¼€å‘ç¯å¢ƒå¯æ­£å¸¸å·¥ä½œï¼š

```bash
# å¯åŠ¨æ•°æ®åº“
pnpm db:start

# é¦–æ¬¡éœ€è¦åˆå§‹åŒ–
pnpm db:setup

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# éªŒè¯æœåŠ¡æ­£å¸¸
# å‰ç«¯: http://localhost:5173
# åç«¯: http://localhost:3000/api/health
```

### ç¬¬äº”æ­¥ï¼šGit æäº¤

```bash
git add feature_list.json
git commit -m "chore: åˆå§‹åŒ– feature_list.json

- åŸºäºéœ€æ±‚æ–‡æ¡£åˆ›å»ºæµ‹è¯•ç”¨ä¾‹æ¸…å•
- å…± X ä¸ªæµ‹è¯•ç”¨ä¾‹å¾…å®ç°
"
```

### ç¬¬å…­æ­¥ï¼ˆå¯é€‰ï¼‰ï¼šå¼€å§‹å®ç°

å¦‚æœæœ¬ä¼šè¯è¿˜æœ‰å‰©ä½™ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥å¼€å§‹å®ç° `feature_list.json` ä¸­çš„ç¬¬ä¸€ä¸ª featureï¼š

1. é€‰æ‹© `id: 1` çš„æ¡ç›®
2. å‚è€ƒ `docs/æ¡†æ¶æ‰©å±•å‡†åˆ™.md` ä¸­çš„æ£€æŸ¥æ¸…å•è¿›è¡Œå®ç°
3. é€æ¡æ‰§è¡Œ steps éªŒè¯
4. é€šè¿‡åå°† `passes` æ”¹ä¸º `true`
5. æäº¤ä»£ç 

### ç¬¬ä¸ƒæ­¥ï¼šç»“æŸä¼šè¯

åœ¨ä¸Šä¸‹æ–‡å¡«æ»¡ä¹‹å‰ï¼š

1. æäº¤æ‰€æœ‰å·¥ä½œä»£ç 
2. åˆ›å»º `claude-progress.txt`ï¼ŒåŒ…å«ï¼š
   - æœ¬ä¼šè¯å®Œæˆäº†ä»€ä¹ˆ
   - feature_list.json ä¸­å“ªäº›æ¡ç›®å·²é€šè¿‡
   - ä¸‹ä¸€ä¸ªä¼šè¯åº”è¯¥åšä»€ä¹ˆ
   - å½“å‰å®ŒæˆçŠ¶æ€ï¼ˆå¦‚ "3/25 æµ‹è¯•é€šè¿‡"ï¼‰
3. ç¡®ä¿ä»£ç åº“å¤„äºå¯è¿è¡ŒçŠ¶æ€

---

## Playwright ç«¯åˆ°ç«¯éªŒè¯

æœ¬é¡¹ç›®ä½¿ç”¨ **playwright-skill** è¿›è¡Œ UI è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„å·¥å…·ï¼Œä¸å¼•å…¥ä»»ä½• Python ä¾èµ–ã€‚

**Skill è·¯å¾„ï¼š** `~/.claude/skills/playwright-skill`ï¼ˆä»¥ä¸‹ç”¨ `$SKILL_DIR` è¡¨ç¤ºï¼‰

### é¦–æ¬¡è®¾ç½®

```bash
cd ~/.claude/skills/playwright-skill && npm run setup
```

### éªŒè¯æµç¨‹

**ç¬¬ä¸€æ­¥ï¼šæ£€æµ‹å¼€å‘æœåŠ¡å™¨**

```bash
cd $SKILL_DIR && node -e "require('./lib/helpers').detectDevServers().then(s => console.log(JSON.stringify(s)))"
```

**ç¬¬äºŒæ­¥ï¼šç¼–å†™æµ‹è¯•è„šæœ¬åˆ° /tmp**

```javascript
// /tmp/playwright-test-login.js
const { chromium } = require('playwright');

const TARGET_URL = 'http://localhost:5173'; // å‰ç«¯åœ°å€

(async () => {
  const browser = await chromium.launch({ headless: false, slowMo: 100 });
  const page = await browser.newPage();

  // ç™»å½•æµç¨‹
  await page.goto(`${TARGET_URL}/login`);
  await page.fill('input[name="email"]', 'admin@example.com');
  await page.fill('input[name="password"]', 'admin123');
  await page.click('button[type="submit"]');

  // éªŒè¯è·³è½¬åˆ°ä»ªè¡¨ç›˜
  await page.waitForURL('**/dashboard');
  console.log('âœ… ç™»å½•æˆåŠŸï¼Œå·²è·³è½¬åˆ°ä»ªè¡¨ç›˜');

  // æˆªå›¾ç•™æ¡£
  await page.screenshot({ path: '/tmp/login-success.png', fullPage: true });
  console.log('ğŸ“¸ æˆªå›¾å·²ä¿å­˜åˆ° /tmp/login-success.png');

  await browser.close();
})();
```

**ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæµ‹è¯•**

```bash
cd $SKILL_DIR && node run.js /tmp/playwright-test-login.js
```

### å¸¸ç”¨éªŒè¯æ¨¡å¼

**å“åº”å¼å¸ƒå±€éªŒè¯ï¼š**

```javascript
const viewports = [
  { name: 'desktop', width: 1920, height: 1080 },
  { name: 'tablet', width: 768, height: 1024 },
  { name: 'mobile', width: 375, height: 667 },
];

for (const vp of viewports) {
  await page.setViewportSize({ width: vp.width, height: vp.height });
  await page.screenshot({ path: `/tmp/${vp.name}.png`, fullPage: true });
}
```

**è¡¨å•æäº¤éªŒè¯ï¼š**

```javascript
await page.fill('input[name="name"]', 'æµ‹è¯•é¡¹ç›®');
await page.click('button[type="submit"]');
await page.waitForSelector('.toast-success'); // ç­‰å¾…æˆåŠŸæç¤º
```

### æ³¨æ„äº‹é¡¹

- æµ‹è¯•è„šæœ¬**å¿…é¡»**å†™åˆ° `/tmp/` ç›®å½•ï¼Œä¸è¦æ±¡æŸ“é¡¹ç›®ç›®å½•
- é»˜è®¤ä½¿ç”¨ `headless: false`ï¼ˆå¯è§†åŒ–æµè§ˆå™¨ï¼‰ï¼Œä¾¿äºè°ƒè¯•
- ä½¿ç”¨ `slowMo: 100` è®©æ“ä½œæ›´æ˜“è§‚å¯Ÿ
- æˆªå›¾ä¿å­˜åˆ° `/tmp/` ç›®å½•ï¼Œç”¨äºéªŒè¯ç•™æ¡£

---

**è®°ä½ï¼š**

1. ä½ åœ¨è®¸å¤šä¼šè¯ä¸­æ‹¥æœ‰æ— é™çš„æ—¶é—´ã€‚æ³¨é‡è´¨é‡èƒœäºé€Ÿåº¦ã€‚
2. å®ç°ä»£ç æ—¶**å¿…é¡»**éµå¾ª `docs/æ¡†æ¶æ‰©å±•å‡†åˆ™.md` ä¸­çš„æ¨¡å¼å’Œæ£€æŸ¥æ¸…å•ã€‚
3. æ‰€æœ‰åé¦ˆå’Œæ–‡æ¡£ä½¿ç”¨**ç®€ä½“ä¸­æ–‡**ã€‚
4. å¦‚æœè¿è¡Œå‘½ä»¤æ—¶å­˜åœ¨ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä»£ç†ï¼š
   ```bash
   export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890
   ```
